{"ast":null,"code":"var _jsxFileName = \"/Users/samuelchng/spartandefi/spartan-frontendfarms/src/views/Presale/Presale.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport styled, { keyframes } from 'styled-components';\nimport { useWallet } from '@binance-chain/bsc-use-wallet';\nimport { Heading, BaseLayout, Card, CardBody, CardFooter, Text } from '@pancakeswap-libs/uikit';\nimport Page from 'components/layout/Page';\nimport { usePresaleData } from 'state/hooks';\nimport useRefresh from 'hooks/useRefresh';\nimport { fetchUserTokensUnclaimedDataAsync, fetchTokensLeftDataAsync, fetchUserPresaleAllowanceDataAsync, fetchUserBalanceDataAsync } from 'state/actions';\nimport UnlockButton from 'components/UnlockButton';\nimport { getBalanceNumber } from 'utils/formatBalance';\nimport BuyCard from './components/BuyCard';\nimport styles from './styles/presale.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Glow = keyframes`\n  from {\n    box-shadow:0px 0px 5px 2px #52c41a;\n  }\n  to {\n    box-shadow:0px 0px 15px 10px #52c41a;\n  }\n`;\nconst PresaleCountDownCard = styled(Card)`\n  animation: ${Glow} 1s infinite alternate;\n`;\n_c = PresaleCountDownCard;\nconst Header = styled.div`\n  align-items: center;\n  background-image: url('/images/presalebanner.gif');\n  background-repeat: no-repeat;\n  background-position: center center;\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n  margin: auto;\n  padding-top: 20px;\n  text-align: center;\n  background-size: 100%;\n\n  ${({\n  theme\n}) => theme.mediaQueries.lg} {\n    background-position: center;\n    background-image: url(/images/presalebanner.gif);\n    background-size: 100%;\n    height: 220px;\n    padding-top: 0;\n  }\n  \n`;\n_c2 = Header;\nconst PresaleCard = styled.div`\n  align-self: baseline;\n  background: ${props => props.theme.card.background};\n  border-radius: 32px;\n  box-shadow: 0px 2px 12px -8px rgba(25, 19, 38, 0.1), 0px 1px 1px rgba(25, 19, 38, 0.05);\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  padding: 24px;\n  position: relative;\n  text-align: center;\n`;\nconst CountdownText = styled.span`\n  font-size: 16px;\n  color: #d2691e;\n  background: ${props => props.theme.card.background};;\n  padding: 16px;\n  border-radius: 16px;\n  width: 230px;\n  margin-bottom: 16px;\n  display: flex;\n  flex-direction: column;\n\n  ${({\n  theme\n}) => theme.mediaQueries.lg} {\n    margin-right: auto;\n    margin-left: 32px;\n    margin-bottom: 32px;\n  }\n`;\nconst Cards = styled(BaseLayout)`\n  align-items: stretch;\n  justify-content: stretch;\n  margin-bottom: 48px;\n\n  & > div {\n    grid-column: span 6;\n    width: 100%;\n  }\n\n  ${({\n  theme\n}) => theme.mediaQueries.sm} {\n    & > div {\n      grid-column: span 8;\n    }\n  }\n\n  ${({\n  theme\n}) => theme.mediaQueries.lg} {\n    & > div {\n      grid-column: span 6;\n    }\n  }\n`;\n_c3 = Cards;\n\nconst Presale = () => {\n  _s();\n\n  const {\n    account,\n    ethereum\n  } = useWallet();\n  const presale = usePresaleData();\n  const dispatch = useDispatch();\n  const {\n    slowRefresh\n  } = useRefresh();\n  useEffect(() => {\n    if (account) {\n      dispatch(fetchUserTokensUnclaimedDataAsync(account));\n      dispatch(fetchUserPresaleAllowanceDataAsync(account));\n      dispatch(fetchUserBalanceDataAsync(account));\n    }\n\n    dispatch(fetchTokensLeftDataAsync());\n  }, [account, dispatch, slowRefresh]); // tochange block number and launch timestamp, rmb change the busdPerToken\n  // tochange to launch timer when presale ends\n\n  const REACT_BSC_API_KEY = \"M9EPE6TRSEAEYSE1D1XY8QKN2B6QIVGD1C\";\n  const PRESALE_BLOCKNUMBER = 8948888;\n  const [presaleCountdownDate, setPresaleCountdownDate] = useState(0); // const [launchCountdownDate, setLaunchCountdownDate] = useState(1625014800000)\n\n  const [loading, setLoading] = useState(true);\n  const [launchCountdownDate, setLaunchCountdownDate] = useState(0);\n  useEffect(() => {\n    fetch(`https://api.bscscan.com/api?module=block&action=getblockcountdown&blockno=${PRESALE_BLOCKNUMBER}&apikey=${REACT_BSC_API_KEY}`).then(res => res.json().then(data => setPresaleCountdownDate(Number(Date.now() + data.result.EstimateTimeInSec * 10 ** 3))));\n    setLaunchCountdownDate(1626051600000);\n  }, []);\n  useEffect(() => {\n    if (presaleCountdownDate !== 0) {\n      setLoading(false);\n    }\n  }, [presaleCountdownDate]);\n  return /*#__PURE__*/_jsxDEV(Page, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: '32px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(PresaleCountDownCard, {\n        children: /*#__PURE__*/_jsxDEV(CardBody, {\n          children: !loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"table\",\n              marginLeft: \"auto\",\n              marginRight: \"auto\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Heading, {\n              children: \"Presale has ended!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(Text, {\n            children: \"Connecting to BSC! Give us a minute...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Cards, {\n        children: [/*#__PURE__*/_jsxDEV(Card, {\n          className: styles.card,\n          children: [/*#__PURE__*/_jsxDEV(CardBody, {\n            children: \"Presale Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardFooter, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.flex,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"Presale ended\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          className: styles.card,\n          children: [/*#__PURE__*/_jsxDEV(CardBody, {\n            children: \"Your Presale GOB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardFooter, {\n            children: !account ? /*#__PURE__*/_jsxDEV(UnlockButton, {\n              mt: \"8px\",\n              fullWidth: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 37\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.flex,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.item,\n                children: [\"GOB unclaimed: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: styles.colored,\n                  children: getBalanceNumber(presale.tokensUnclaimed)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 61\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.item,\n                children: [\"GOB in wallet: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: styles.colored,\n                  children: getBalanceNumber(presale.cakeBalance)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 61\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BuyCard, {\n        account: account,\n        ethereum: ethereum,\n        allowance: presale.userAllowance,\n        busdBalance: presale.busdBalance,\n        tokensUnclaimed: presale.tokensUnclaimed,\n        tokenBalance: presale.cakeBalance,\n        tokensLeft: presale.tokensLeft\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 158,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Presale, \"iJSTzJK1vXyGp95GoqqkFsxgCzU=\", false, function () {\n  return [useWallet, usePresaleData, useDispatch, useRefresh];\n});\n\n_c4 = Presale;\nexport default Presale;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"PresaleCountDownCard\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"Cards\");\n$RefreshReg$(_c4, \"Presale\");","map":{"version":3,"sources":["/Users/samuelchng/spartandefi/spartan-frontendfarms/src/views/Presale/Presale.tsx"],"names":["React","useEffect","useState","useDispatch","styled","keyframes","useWallet","Heading","BaseLayout","Card","CardBody","CardFooter","Text","Page","usePresaleData","useRefresh","fetchUserTokensUnclaimedDataAsync","fetchTokensLeftDataAsync","fetchUserPresaleAllowanceDataAsync","fetchUserBalanceDataAsync","UnlockButton","getBalanceNumber","BuyCard","styles","Glow","PresaleCountDownCard","Header","div","theme","mediaQueries","lg","PresaleCard","props","card","background","CountdownText","span","Cards","sm","Presale","account","ethereum","presale","dispatch","slowRefresh","REACT_BSC_API_KEY","PRESALE_BLOCKNUMBER","presaleCountdownDate","setPresaleCountdownDate","loading","setLoading","launchCountdownDate","setLaunchCountdownDate","fetch","then","res","json","data","Number","Date","now","result","EstimateTimeInSec","margin","display","marginLeft","marginRight","flex","item","colored","tokensUnclaimed","cakeBalance","userAllowance","busdBalance","tokensLeft"],"mappings":"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","sourcesContent":["import React, { useEffect, useCallback, useState } from 'react'\r\nimport { Route, useRouteMatch } from 'react-router-dom'\r\nimport { useDispatch } from 'react-redux'\r\nimport BigNumber from 'bignumber.js'\r\nimport styled, { keyframes } from 'styled-components'\r\nimport { useWallet } from '@binance-chain/bsc-use-wallet'\r\nimport { provider } from 'web3-core'\r\nimport { Image, Heading, BaseLayout, Card, CardBody, CardFooter, Text } from '@pancakeswap-libs/uikit'\r\nimport { BLOCKS_PER_YEAR, CAKE_PER_BLOCK, CAKE_POOL_PID } from 'config'\r\nimport FlexLayout from 'components/layout/Flex'\r\nimport Countdown, { zeroPad } from 'react-countdown'\r\nimport Page from 'components/layout/Page'\r\nimport { usePresaleData } from 'state/hooks'\r\nimport useRefresh from 'hooks/useRefresh'\r\nimport { fetchUserTokensUnclaimedDataAsync, fetchTokensLeftDataAsync, fetchUserPresaleAllowanceDataAsync, fetchUserBalanceDataAsync } from 'state/actions'\r\nimport { QuoteToken } from 'config/constants/types'\r\nimport useI18n from 'hooks/useI18n'\r\nimport UnlockButton from 'components/UnlockButton'\r\nimport { getBalanceNumber } from 'utils/formatBalance'\r\nimport CircleTimer from 'components/CircleTimer'\r\nimport DigitTimer from 'components/DigitTimer'\r\nimport UnlockWalletCard from './components/UnlockWalletCard'\r\nimport BuyCard from './components/BuyCard'\r\nimport styles from './styles/presale.module.css'\r\n\r\nexport interface PresaleProps {\r\n  tokenMode?: boolean\r\n}\r\n\r\nconst Glow = keyframes`\r\n  from {\r\n    box-shadow:0px 0px 5px 2px #52c41a;\r\n  }\r\n  to {\r\n    box-shadow:0px 0px 15px 10px #52c41a;\r\n  }\r\n`\r\n\r\nconst PresaleCountDownCard = styled(Card)`\r\n  animation: ${Glow} 1s infinite alternate;\r\n`\r\n\r\nconst Header = styled.div`\r\n  align-items: center;\r\n  background-image: url('/images/presalebanner.gif');\r\n  background-repeat: no-repeat;\r\n  background-position: center center;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  flex-direction: column;\r\n  margin: auto;\r\n  padding-top: 20px;\r\n  text-align: center;\r\n  background-size: 100%;\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    background-position: center;\r\n    background-image: url(/images/presalebanner.gif);\r\n    background-size: 100%;\r\n    height: 220px;\r\n    padding-top: 0;\r\n  }\r\n  \r\n`\r\n\r\nconst PresaleCard = styled.div`\r\n  align-self: baseline;\r\n  background: ${(props) => props.theme.card.background};\r\n  border-radius: 32px;\r\n  box-shadow: 0px 2px 12px -8px rgba(25, 19, 38, 0.1), 0px 1px 1px rgba(25, 19, 38, 0.05);\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-around;\r\n  padding: 24px;\r\n  position: relative;\r\n  text-align: center;\r\n`\r\n\r\nconst CountdownText = styled.span`\r\n  font-size: 16px;\r\n  color: #d2691e;\r\n  background: ${(props) => props.theme.card.background};;\r\n  padding: 16px;\r\n  border-radius: 16px;\r\n  width: 230px;\r\n  margin-bottom: 16px;\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    margin-right: auto;\r\n    margin-left: 32px;\r\n    margin-bottom: 32px;\r\n  }\r\n`\r\nconst Cards = styled(BaseLayout)`\r\n  align-items: stretch;\r\n  justify-content: stretch;\r\n  margin-bottom: 48px;\r\n\r\n  & > div {\r\n    grid-column: span 6;\r\n    width: 100%;\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    & > div {\r\n      grid-column: span 8;\r\n    }\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    & > div {\r\n      grid-column: span 6;\r\n    }\r\n  }\r\n`\r\n\r\nconst Presale: React.FC = () => {\r\n  const { account, ethereum }: { account: string; ethereum: provider } = useWallet()\r\n  const presale = usePresaleData()\r\n\r\n  const dispatch = useDispatch()\r\n  const { slowRefresh } = useRefresh()\r\n\r\n  useEffect(() => {\r\n    if (account) {\r\n      dispatch(fetchUserTokensUnclaimedDataAsync(account))\r\n      dispatch(fetchUserPresaleAllowanceDataAsync(account))\r\n      dispatch(fetchUserBalanceDataAsync(account))\r\n    }\r\n    dispatch(fetchTokensLeftDataAsync())\r\n  }, [account, dispatch, slowRefresh])\r\n  // tochange block number and launch timestamp, rmb change the busdPerToken\r\n  // tochange to launch timer when presale ends\r\n  const REACT_BSC_API_KEY = \"M9EPE6TRSEAEYSE1D1XY8QKN2B6QIVGD1C\"\r\n  const PRESALE_BLOCKNUMBER = 8948888\r\n  const [presaleCountdownDate, setPresaleCountdownDate] = useState(0)\r\n  // const [launchCountdownDate, setLaunchCountdownDate] = useState(1625014800000)\r\n  const [loading, setLoading] = useState(true);\r\n  const [launchCountdownDate, setLaunchCountdownDate] = useState(0)\r\n\r\n  useEffect(() => {\r\n    fetch(`https://api.bscscan.com/api?module=block&action=getblockcountdown&blockno=${PRESALE_BLOCKNUMBER}&apikey=${REACT_BSC_API_KEY}`)\r\n      .then(res => res.json().then(data =>\r\n        setPresaleCountdownDate(Number(Date.now() + data.result.EstimateTimeInSec * (10 ** 3)\r\n        ))))\r\n    setLaunchCountdownDate(1626051600000)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (presaleCountdownDate !== 0) {\r\n      setLoading(false)\r\n    }\r\n  }, [presaleCountdownDate])\r\n\r\n  return (\r\n    <Page>\r\n      <Header />\r\n      <div style={{ margin: '32px' }}>\r\n        <PresaleCountDownCard>\r\n          <CardBody>\r\n            {!loading ?\r\n              <div style={{ display: \"table\", marginLeft: \"auto\", marginRight: \"auto\" }}>\r\n                <Heading>Presale has ended!</Heading>\r\n                {/* <CircleTimer endTime={launchCountdownDate * 10 ** (-3)} baseColor=\"#f6ffed\" activeColor=\"#52c41a\" title=\"\"/> */}\r\n                {/* <DigitTimer heading='Presale-End/Launch Countdown' text='Presale ended!' timeStamp={launchCountdownDate} /> */}\r\n              </div>\r\n              :\r\n              <Text>Connecting to BSC! Give us a minute...</Text>\r\n            }\r\n          </CardBody>\r\n        </PresaleCountDownCard>\r\n        <br />\r\n        {/* <Card>\r\n          <CardBody>What will your funding be used for</CardBody>\r\n          <CardFooter>\r\n            - 25% goes to providing liquditiy\r\n            - 50% goes to marketing\r\n            - 25% goes to the dev funds\r\n          </CardFooter>\r\n        </Card> */}\r\n        <br />\r\n        <Cards>\r\n          <Card className={styles.card}>\r\n            <CardBody>Presale Information</CardBody>\r\n            <CardFooter>\r\n              <div className={styles.flex}>\r\n                {/* <div className={styles.item}>Number of Presale Tokens remaining: <span className={styles.colored}>{Math.floor(getBalanceNumber(presale.tokensLeft))}</span></div>\r\n                <div className={styles.item}>Number of Tokens Sold: <span className={styles.colored}>{100000 - Math.floor(getBalanceNumber(presale.tokensLeft))}</span></div> */}\r\n                <div>Presale ended</div>\r\n              </div>\r\n            </CardFooter>\r\n          </Card>\r\n          <Card className={styles.card}>\r\n            <CardBody>Your Presale GOB</CardBody>\r\n            <CardFooter>{!account ? <UnlockButton mt=\"8px\" fullWidth /> :\r\n              <div className={styles.flex}>\r\n                <div className={styles.item}>GOB unclaimed: <span className={styles.colored}>{getBalanceNumber(presale.tokensUnclaimed)}</span></div>\r\n                <div className={styles.item}>GOB in wallet: <span className={styles.colored}>{getBalanceNumber(presale.cakeBalance)}</span></div>\r\n              </div>\r\n            }</CardFooter>\r\n          </Card>\r\n        </Cards>\r\n        <BuyCard account={account} ethereum={ethereum} allowance={presale.userAllowance} busdBalance={presale.busdBalance} tokensUnclaimed={presale.tokensUnclaimed} tokenBalance={presale.cakeBalance} tokensLeft={presale.tokensLeft} />\r\n      </div>\r\n    </Page>\r\n  )\r\n}\r\n\r\nexport default Presale\r\n"]},"metadata":{},"sourceType":"module"}