{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$();\n\nimport { useCallback } from 'react';\nimport { useWallet } from '@binance-chain/bsc-use-wallet';\nimport { ethers } from 'ethers';\nimport { useDispatch } from 'react-redux';\nimport { updateUserAllowance, fetchFarmUserDataAsync, fetchUserPresaleAllowanceDataAsync } from 'state/actions';\nimport { approve } from 'utils/callHelpers';\nimport { useMasterchef, useCake, useSousChef, useLottery, usePresale } from './useContract'; // Approve a Farm\n\nexport const useApprove = lpContract => {\n  _s();\n\n  const dispatch = useDispatch();\n  const {\n    account\n  } = useWallet();\n  const masterChefContract = useMasterchef();\n  const handleApprove = useCallback(async () => {\n    try {\n      const tx = await approve(lpContract, masterChefContract, account);\n      dispatch(fetchFarmUserDataAsync(account));\n      return tx;\n    } catch (e) {\n      return false;\n    }\n  }, [account, dispatch, lpContract, masterChefContract]);\n  return {\n    onApprove: handleApprove\n  };\n};\n\n_s(useApprove, \"912YkJ6AGYumCBnuye56mVxNDwo=\", false, function () {\n  return [useDispatch, useWallet, useMasterchef];\n});\n\nexport const useApprovePresale = busdContract => {\n  _s2();\n\n  const dispatch = useDispatch();\n  const {\n    account\n  } = useWallet();\n  const presaleContract = usePresale();\n  const handleApprove = useCallback(async () => {\n    try {\n      const tx = await approve(busdContract, presaleContract, account);\n      dispatch(fetchUserPresaleAllowanceDataAsync(account));\n      return tx;\n    } catch (e) {\n      return false;\n    }\n  }, [account, dispatch, busdContract, presaleContract]);\n  return {\n    onApprove: handleApprove\n  };\n}; // Approve a Pool\n\n_s2(useApprovePresale, \"tEWd0yHTUbTMQK1ZzFElAuqhOWk=\", false, function () {\n  return [useDispatch, useWallet, usePresale];\n});\n\nexport const useSousApprove = (lpContract, sousId) => {\n  _s3();\n\n  const dispatch = useDispatch();\n  const {\n    account\n  } = useWallet();\n  const sousChefContract = useSousChef(sousId);\n  const handleApprove = useCallback(async () => {\n    try {\n      const tx = await approve(lpContract, sousChefContract, account);\n      dispatch(updateUserAllowance(sousId, account));\n      return tx;\n    } catch (e) {\n      return false;\n    }\n  }, [account, dispatch, lpContract, sousChefContract, sousId]);\n  return {\n    onApprove: handleApprove\n  };\n}; // Approve the lottery\n\n_s3(useSousApprove, \"ggN7BKqdJe4zaUSHEp+Mf3+jW2Q=\", false, function () {\n  return [useDispatch, useWallet, useSousChef];\n});\n\nexport const useLotteryApprove = () => {\n  _s4();\n\n  const {\n    account\n  } = useWallet();\n  const cakeContract = useCake();\n  const lotteryContract = useLottery();\n  const handleApprove = useCallback(async () => {\n    try {\n      const tx = await approve(cakeContract, lotteryContract, account);\n      return tx;\n    } catch (e) {\n      return false;\n    }\n  }, [account, cakeContract, lotteryContract]);\n  return {\n    onApprove: handleApprove\n  };\n}; // Approve an IFO\n\n_s4(useLotteryApprove, \"qmmDwizDBCPS/KQkbYFMkBrCi+A=\", false, function () {\n  return [useWallet, useCake, useLottery];\n});\n\nexport const useIfoApprove = (tokenContract, spenderAddress) => {\n  _s5();\n\n  const {\n    account\n  } = useWallet();\n  const onApprove = useCallback(async () => {\n    try {\n      const tx = await tokenContract.methods.approve(spenderAddress, ethers.constants.MaxUint256).send({\n        from: account\n      });\n      return tx;\n    } catch {\n      return false;\n    }\n  }, [account, spenderAddress, tokenContract]);\n  return onApprove;\n};\n\n_s5(useIfoApprove, \"5YEWPx3HiFEhK5UYbT6NzOlDPbw=\", false, function () {\n  return [useWallet];\n});","map":{"version":3,"sources":["/Users/samuelchng/spartandefi/spartan-frontendfarms/src/hooks/useApprove.ts"],"names":["useCallback","useWallet","ethers","useDispatch","updateUserAllowance","fetchFarmUserDataAsync","fetchUserPresaleAllowanceDataAsync","approve","useMasterchef","useCake","useSousChef","useLottery","usePresale","useApprove","lpContract","dispatch","account","masterChefContract","handleApprove","tx","e","onApprove","useApprovePresale","busdContract","presaleContract","useSousApprove","sousId","sousChefContract","useLotteryApprove","cakeContract","lotteryContract","useIfoApprove","tokenContract","spenderAddress","methods","constants","MaxUint256","send","from"],"mappings":"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","sourcesContent":["import { useCallback } from 'react'\r\nimport { useWallet } from '@binance-chain/bsc-use-wallet'\r\nimport { Contract } from 'web3-eth-contract'\r\nimport { ethers } from 'ethers'\r\nimport { useDispatch } from 'react-redux'\r\nimport { updateUserAllowance, fetchFarmUserDataAsync, fetchUserPresaleAllowanceDataAsync } from 'state/actions'\r\nimport { approve } from 'utils/callHelpers'\r\nimport { useMasterchef, useCake, useSousChef, useLottery, usePresale } from './useContract'\r\n\r\n// Approve a Farm\r\nexport const useApprove = (lpContract: Contract) => {\r\n  const dispatch = useDispatch()\r\n  const { account }: { account: string } = useWallet()\r\n  const masterChefContract = useMasterchef()\r\n\r\n  const handleApprove = useCallback(async () => {\r\n    try {\r\n      const tx = await approve(lpContract, masterChefContract, account)\r\n      dispatch(fetchFarmUserDataAsync(account))\r\n      return tx\r\n    } catch (e) {\r\n      return false\r\n    }\r\n  }, [account, dispatch, lpContract, masterChefContract])\r\n\r\n  return { onApprove: handleApprove }\r\n}\r\n\r\nexport const useApprovePresale = (busdContract: Contract) => {\r\n  const dispatch = useDispatch()\r\n  const { account }: { account: string } = useWallet()\r\n  const presaleContract = usePresale()\r\n\r\n  const handleApprove = useCallback(async () => {\r\n    try {\r\n      const tx = await approve(busdContract, presaleContract, account)\r\n      dispatch(fetchUserPresaleAllowanceDataAsync(account))\r\n      return tx\r\n    } catch (e) {\r\n      return false\r\n    }\r\n  }, [account, dispatch, busdContract, presaleContract])\r\n\r\n  return { onApprove: handleApprove }\r\n}\r\n\r\n// Approve a Pool\r\nexport const useSousApprove = (lpContract: Contract, sousId) => {\r\n  const dispatch = useDispatch()\r\n  const { account }: { account: string } = useWallet()\r\n  const sousChefContract = useSousChef(sousId)\r\n\r\n  const handleApprove = useCallback(async () => {\r\n    try {\r\n      const tx = await approve(lpContract, sousChefContract, account)\r\n      dispatch(updateUserAllowance(sousId, account))\r\n      return tx\r\n    } catch (e) {\r\n      return false\r\n    }\r\n  }, [account, dispatch, lpContract, sousChefContract, sousId])\r\n\r\n  return { onApprove: handleApprove }\r\n}\r\n\r\n// Approve the lottery\r\nexport const useLotteryApprove = () => {\r\n  const { account }: { account: string } = useWallet()\r\n  const cakeContract = useCake()\r\n  const lotteryContract = useLottery()\r\n\r\n  const handleApprove = useCallback(async () => {\r\n    try {\r\n      const tx = await approve(cakeContract, lotteryContract, account)\r\n      return tx\r\n    } catch (e) {\r\n      return false\r\n    }\r\n  }, [account, cakeContract, lotteryContract])\r\n\r\n  return { onApprove: handleApprove }\r\n}\r\n\r\n// Approve an IFO\r\nexport const useIfoApprove = (tokenContract: Contract, spenderAddress: string) => {\r\n  const { account } = useWallet()\r\n  const onApprove = useCallback(async () => {\r\n    try {\r\n      const tx = await tokenContract.methods\r\n        .approve(spenderAddress, ethers.constants.MaxUint256)\r\n        .send({ from: account })\r\n      return tx\r\n    } catch {\r\n      return false\r\n    }\r\n  }, [account, spenderAddress, tokenContract])\r\n\r\n  return onApprove\r\n}\r\n"]},"metadata":{},"sourceType":"module"}